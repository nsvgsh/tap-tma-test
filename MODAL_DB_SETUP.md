# Настройка модальных окон через базу данных

## Что изменилось

Теперь конфигурация модальных окон управляется через базу данных вместо JSON файла.

## Как это работает

1. **Столбец `integration`** в таблице `level_events` определяет, нужно ли использовать кастомную конфигурацию для уровня
2. **Если `integration = true`** - используется кастомная конфигурация
3. **Если `integration = false` или NULL** - используется стандартная конфигурация

## Настройка уровней

### В Supabase Dashboard:

1. Откройте таблицу `level_events`
2. Найдите записи для нужного уровня
3. Установите `integration = true` для уровней, которые должны использовать кастомную конфигурацию

### SQL команда:

```sql
-- Включить кастомную конфигурацию для уровня 1
UPDATE level_events 
SET integration = true 
WHERE level = 1;

-- Включить кастомную конфигурацию для уровня 5
UPDATE level_events 
SET integration = true 
WHERE level = 5;

-- Отключить кастомную конфигурацию для уровня 10
UPDATE level_events 
SET integration = false 
WHERE level = 10;
```

## Кастомная конфигурация

Все уровни с `integration = true` используют одинаковую конфигурацию:

- **rewardsLabel**: "CONGRATS! YOU GOT ACCESS"
- **rewardsLayout**: "gift-center" (показывает подарок по центру)
- **actionsLayout**: "wide-green" (широкая зеленая кнопка "TRY FOR FREE")
- **giftIcon**: "/ui/bottomnav/assets/Icon_ImageIcon_Gift_Purple.png"

## API Endpoint

- **GET** `/api/v1/modal/config?level={level}` - получить конфигурацию для уровня
- Возвращает `hasCustomConfig: true/false` и конфигурацию

## Кэширование

Конфигурации кэшируются на клиенте для улучшения производительности.
Кэш очищается при перезагрузке страницы.

## Преимущества

- ✅ Управление через базу данных
- ✅ Не нужно передеплоить код для изменения уровней
- ✅ Централизованное управление
- ✅ Кэширование для производительности
- ✅ Fallback на стандартную конфигурацию при ошибках
