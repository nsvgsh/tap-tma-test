/* Font-face is defined globally in globals.css; avoid duplicate declarations here */

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: calc(16px + env(safe-area-inset-top)) 16px calc(24px + env(safe-area-inset-bottom));
}

.card {
  inline-size: clamp(0px, 100%, 388px);
  /* 592px @ 420px width: maintain aspect as width scales down; clamp to viewport */
  block-size: min(calc(100cqw * 592 / 420), calc(90dvh - (env(safe-area-inset-top) + env(safe-area-inset-bottom))));
  max-height: min(592px, calc(90dvh - (env(safe-area-inset-top) + env(safe-area-inset-bottom))));
  overflow: visible;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  padding: 20px 16px 0;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  background: radial-gradient(60% 50% at 50% 40%, #074274 0%, #082D53 60%, #082D53 100%);
  color: var(--theme-foreground);
  text-align: center;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr) auto; /* header / scrollable rewards / sticky CTAs */
  row-gap: 12px;
  container-type: inline-size;
}
.headerArea {
  min-height: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
}

.closeButton {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition: all 0.2s ease;
}

.closeButton:hover {
  background: rgba(0, 0, 0, 0.8);
  transform: scale(1.1);
}

.closeButton:active {
  transform: scale(0.95);
}


.headline {
  font-family: 'Lilita One', sans-serif;
  font-size: clamp(14px, 6cqw, 20px);
  letter-spacing: 0.5px;
  text-shadow: 0 2px 0 rgba(0,0,0,0.35);
  opacity: 0.95;
  color: #ffffff;
}

.shield {
  position: relative;
  width: clamp(85px, 35cqw, 180px);
  aspect-ratio: 5 / 6;
  margin: 16px auto 0px auto;
  background: url('/dev/ui/header/assets/Icon_ImageIcon_LevelFrame1.png') center/contain no-repeat;
  filter: drop-shadow(0 10px 20px rgba(0,0,0,0.35));
  container-type: size;
}

.levelNum {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Lilita One', sans-serif;
  font-size: min(50cqh, 120px);
  font-weight: 400;
  color: #ffffff;
  transform: translateY(-6%);
  filter: drop-shadow(0 0.08em 0 #000000);
  -webkit-text-stroke: 0.03em #000000;
}

.title {
  font-family: 'Lilita One';
  font-size: clamp(18px, 12cqw, 40px);
  /* margin-top: -7px; */
  padding-top: 8px;
  font-weight: 400;
  /* letter-spacing: -0.025em; */
  color: #ffffff;  
  filter: drop-shadow(0 0.08em 0 #000000);
}

.rewardsBox {
  container-type: size;   
  container-name: rewards;
  overflow: visible;
  min-height: 0;
  /* margin-top: 12px; */
  /* margin-bottom: 12px; */
  padding: 14px 12px 4px 12px;
  border-radius: 16px;
  background: rgba(0,0,0,0.25);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
  text-align: left;
  display: flex;
  flex-direction: column;
}

.rewardsLabel {
  font-weight: 700;
  opacity: 0.9;
  letter-spacing: 1px;
  font-size: 13px;
  text-align: center;
  display: block;
  color: #ffffff;
}

.rewardsRow {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* always two columns */
  gap: 12px;
  justify-items: stretch;
  align-items: stretch;
  margin-top: 12px;
  flex: 1 1 auto;          /* take remaining vertical space in rewardsBox */
  padding: 8px;             /* internal paddings as requested */
  min-height: 0;            /* allow shrinking inside flex column parent */
  overflow: hidden;         /* prevent scroll within rewards bar */
}

.actions {
  display: flex;
  justify-content: center;
  gap: 12px;
  align-self: end; /* pin to bottom grid row edge */
}

.actionsItem { 
  flex: 1 1 0; 
  max-width: 280px; 
  container-type: inline-size; /* allow 100cqw-based CTA height calculation */
}

/* Maintain CTA aspect ratio: height/width = 55/172 ≈ 0.31977 */
.ctaButton { 
  width: 100%;
  height: clamp(0px, 100cqw * 70 / 172, 70px) !important;
  font-size: clamp(20px, 22cqw, 25px);
  /* Apply Button scaling like Button_buttonBase */
  font-family: 'Lilita One';
  font-weight: 400;
  letter-spacing: -0.025em;
  color: #ffffff;
  -webkit-text-stroke: 0.018em #000000;
  filter: drop-shadow(0 0.07em 0 #000000);
  line-height: 1;
  transform: translateY(calc(-1 * 0.12 * 100%));
}

/* Ensure consistent scaling for custom modal buttons */
.giftCenter .ctaButton {
  width: 100%;
  height: clamp(0px, 100cqw * 70 / 172, 70px) !important;
  font-size: clamp(20px, 22cqw, 25px);
  /* Apply Button scaling like Button_buttonBase */
  font-family: 'Lilita One';
  font-weight: 400;
  letter-spacing: -0.025em;
  color: #ffffff;
  -webkit-text-stroke: 0.018em #000000;
  filter: drop-shadow(0 0.07em 0 #000000);
  line-height: 1;
  transform: translateY(calc(-1 * 0.12 * 100%));
}

/* Mobile responsiveness for 320px width */
@media (max-width: 320px) {
  .ctaButton {
    height: 50px !important;
  }
  
  .giftCenter .ctaButton {
    height: 50px !important;
  }
  
  .actionLabel {
    font-size: clamp(14px, 4cqw, 16px);
  }
  
  .rewardsLabelTop,
  .rewardsLabelBottom {
    font-size: 16px;
  }
  
  .giftIcon {
    width: 80px;
    height: 80px;
  }
  
  .arcText {
    font-size: clamp(14px, 4cqw, 20px); /* Responsive scaling for mobile */
  }
}



/* Custom level layouts */
.giftCenter {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  flex: 1 1 auto;
  padding: 0 8px 8px 8px;
  gap: 4px;
  overflow: visible;
  position: relative;
  z-index: 1;
  container-type: inline-size; /* Enable cqw units for responsive scaling */
}

.giftIcon {
  width: 80px;
  height: 80px;
  object-fit: contain;
}

/* Split rewards label for custom levels - removed, now using individual positioning */

/* SVG дугообразный текст */
.arcTextTop {
  width: 100%;
  height: 40px;
  margin-bottom: -10px; /* Отрицательный отступ для приближения к картинке */
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
  overflow: visible;
  position: relative;
  z-index: 3;
}

.arcTextBottom {
  width: 100%;
  height: 40px;
  margin-top: -10px; /* Отрицательный отступ для приближения к картинке */
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
  overflow: visible;
  position: relative;
  z-index: 3;
}

.arcText {
  font-family: 'Lilita One', sans-serif;
  font-weight: 700;
  font-size: clamp(16px, 5cqw, 28px); /* Responsive scaling like Button */
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
}

/* Старые стили для fallback (если SVG не поддерживается) */
.rewardsLabelTop {
  font-family: 'Lilita One', sans-serif;
  font-weight: 700;
  font-size: clamp(18px, 8cqw, 28px);
  letter-spacing: 1px;
  text-align: center;
  color: transparent;
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
  border-radius: 0 0 20px 20px;
  padding: 8px 16px 12px 16px;
  display: block;
  margin-bottom: 4px;
  background-color: rgba(255, 215, 0, 0.1);
  overflow: visible;
  position: relative;
  z-index: 2;
  transform: perspective(500px) rotateX(25deg) scaleY(0.7);
  transform-origin: bottom;
  text-shadow: 
    0 0 0 #FFD700,
    0 2px 0 #FFA500,
    0 4px 0 #FF8C00;
}

.rewardsLabelBottom {
  font-family: 'Lilita One', sans-serif;
  font-weight: 700;
  font-size: clamp(18px, 8cqw, 28px);
  letter-spacing: 1px;
  text-align: center;
  color: transparent;
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3));
  border-radius: 20px 20px 0 0;
  padding: 12px 16px 8px 16px;
  display: block;
  margin-top: 4px;
  background-color: rgba(255, 215, 0, 0.1);
  overflow: visible;
  position: relative;
  z-index: 2;
  transform: perspective(500px) rotateX(-25deg) scaleY(0.7);
  transform-origin: top;
  text-shadow: 
    0 0 0 #FFD700,
    0 -2px 0 #FFA500,
    0 -4px 0 #FF8C00;
}

.actionsWide {
  display: flex;
  justify-content: center;
  align-self: end;
  padding: 0 20px;
}

.wideGreenButton {
  width: 100%;
  max-width: 300px;
  height: 60px !important;
  background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%) !important;
  border: none !important;
  border-radius: 12px !important;
  font-weight: 700 !important;
  font-size: 18px !important;
  text-transform: uppercase !important;
  letter-spacing: 1px !important;
  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3) !important;
  transition: all 0.2s ease !important;
}

.wideGreenButton:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4) !important;
}

.wideGreenButton:active {
  transform: translateY(0) !important;
  box-shadow: 0 2px 10px rgba(76, 175, 80, 0.3) !important;
}

/* Reward button styles adapted from bottomnav, scoped to the modal */
.rewardBtn {
  flex: 1 1 0;
  position: relative;
  display: block;           /* allow height:100% to take effect in flex row */
  height: 100%;             /* fill rewardsRow height */
}

.rewardBtnBg {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: fill; /* fill container; ignore intrinsic aspect ratio */
}

.rewardBtnOverlay {
  position: absolute;
  inset: 0;
  display: grid;
  grid-template-rows: 1fr auto; /* icon area + label area */
  justify-items: center;
  align-items: center;
  container-type: size; /* enable cqh for label sizing */
  padding-bottom: 6cqh;
}

.rewardBtnIcon {
  display: block;
  width: 100%;
  height: auto;
  align-self: center;   /* center horizontally in grid cell */
  justify-self: center; /* center horizontally in grid cell */
}

/* Reuse font preferences from bottomnav; only font-size will vary via inline style */
/* .rewardBtnLabel {
  font-family: 'Lilita One';
  font-weight: 400;
  letter-spacing: -0.025em;
  color: #ffffff;  
  filter: drop-shadow(0 0.08em 0 #000000);
  align-self: end;   /* places label in bottom row (auto) */
  /* justify-self: center;
  font-size: min(28cqh, 28cqw); /* tie to overlay height */
  /* -webkit-text-stroke: 0.018em #000000;  */
/* }  */

/* Action label styles to replace inline label styling */
.actionLabel {
  font-family: 'Lilita One';
  font-weight: 400;
  font-size: clamp(18px, 12cqw, 40px);
  letter-spacing: -0.025em;
  color: #ffffff;
  -webkit-text-stroke: 0.018em #000000;
  filter: drop-shadow(0 0.07em 0 #000000);
  line-height: 1;
  transform: translateY(calc(-1 * 0.12 * 100%));
}

/* Zero rewards message */
.zeroRewardsMessage {
  font-family: 'Lilita One';
  font-weight: 400;
  font-size: clamp(16px, 8cqw, 24px);
  color: #FFD700;
  text-align: center;
  margin-top: 10px;
  -webkit-text-stroke: 0.02em #000000;
  filter: drop-shadow(0 0.05em 0 #000000);
}

